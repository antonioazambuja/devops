{
  "builders": [
  {
    "type": "docker",
    "image": "alpine:3.7",
    "commit": "true",
    "run_command": ["-d", "-i", "-t", "{{.Image}}", "/bin/sh"],
    "changes": [
      "USER kafka",
      "WORKDIR /home/kafka/kafka_2.12-2.3.1",
      "ENTRYPOINT [\"/bin/bash\", \"-c\", \"bin/zookeeper-server-start.sh config/zookeeper.properties && bin/kafka-server-start.sh config/server.properties\"]"
    ]
  }],
  "provisioners": [
  {
    "type": "shell",
    "inline": ["apk add python3"]
  },
  {
    "type": "ansible",
    "playbook_file": "playbook.yml"
  }],
  "post-processors": [
  {
    "type": "docker-tag",
    "repository": "tema17-kafka",
    "tag": "1"
  }]
}